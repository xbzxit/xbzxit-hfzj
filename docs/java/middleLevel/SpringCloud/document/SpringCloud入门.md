# SpringCloudå…¥é—¨

## ç³»ç»Ÿæ¶æ„çš„æ¼”å˜

### é›†ä¸­å¼æ¶æ„

> å½“ç½‘ç«™æµé‡å¾ˆå°æ—¶ï¼Œåªéœ€ä¸€ä¸ªåº”ç”¨ï¼Œå°†æ‰€æœ‰åŠŸèƒ½éƒ½éƒ¨ç½²åœ¨ä¸€èµ·ï¼Œä»¥å‡å°‘éƒ¨ç½²èŠ‚ç‚¹å’Œæˆæœ¬

![image.png](./assets/1671546567335-image.png)

ğŸ‘   **ä¼˜ç‚¹**

* ç³»ç»Ÿå¼€å‘é€Ÿåº¦å¿«
* ç»´æŠ¤æˆæœ¬ä½
* é€‚ç”¨äºå¹¶å‘è¦æ±‚è¾ƒä½çš„ç³»ç»Ÿ

ğŸ‘  **ç¼ºç‚¹**

* ä»£ç è€¦åˆåº¦é«˜ï¼ŒåæœŸç»´æŠ¤å›°éš¾
* æ— æ³•é’ˆå¯¹ä¸åŒæ¨¡å—è¿›è¡Œé’ˆå¯¹æ€§ä¼˜åŒ–
* æ— æ³•æ°´å¹³æ‰©å±•
* å•ç‚¹å®¹é”™ç‡ä½ï¼Œå¹¶å‘èƒ½åŠ›å·®

### å‚ç›´æ‹†åˆ†

> å½“è®¿é—®é‡é€æ¸å¢å¤§ï¼Œå•ä¸€åº”ç”¨æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œæ­¤æ—¶ä¸ºäº†åº”å¯¹æ›´é«˜çš„å¹¶å‘å’Œä¸šåŠ¡éœ€æ±‚ï¼Œæˆ‘ä»¬æ ¹æ®ä¸šåŠ¡åŠŸèƒ½å¯¹ç³»ç»Ÿè¿›è¡Œæ‹†åˆ†ï¼š

![image.png](./assets/1671547239300-image.png)

ğŸ‘   **ä¼˜ç‚¹**

* ç³»ç»Ÿæ‹†åˆ†å®ç°äº†æµé‡åˆ†æ‹…ï¼Œè§£å†³äº†å¹¶å‘é—®é¢˜
* å¯ä»¥é’ˆå¯¹ä¸åŒæ¨¡å—è¿›è¡Œä¼˜åŒ–
* æ–¹ä¾¿æ°´å¹³æ‰©å±•ï¼Œè´Ÿè½½å‡è¡¡ï¼Œå®¹é”™ç‡æé«˜

ğŸ‘  **ç¼ºç‚¹**

* ç³»ç»Ÿé—´ç›¸äº’ç‹¬ç«‹ï¼Œä¼šæœ‰å¾ˆå¤šé‡å¤å¼€å‘å·¥ä½œï¼Œå½±å“å¼€å‘æ•ˆç‡

### åˆ†å¸ƒå¼æœåŠ¡

> å½“å‚ç›´åº”ç”¨è¶Šæ¥è¶Šå¤šï¼Œåº”ç”¨ä¹‹é—´äº¤äº’ä¸å¯é¿å…ï¼Œå°†æ ¸å¿ƒä¸šåŠ¡æŠ½å–å‡ºæ¥ï¼Œä½œä¸ºç‹¬ç«‹çš„æœåŠ¡ï¼Œé€æ¸å½¢æˆç¨³å®šçš„æœåŠ¡ä¸­å¿ƒï¼Œä½¿å‰ç«¯åº”ç”¨èƒ½æ›´å¿«é€Ÿçš„å“åº”å¤šå˜çš„å¸‚åœºéœ€æ±‚ã€‚

![image.png](./assets/1671547444387-image.png)

ğŸ‘   **ä¼˜ç‚¹**

* å°†åŸºç¡€æœåŠ¡è¿›è¡Œäº†æŠ½å–ï¼Œç³»ç»Ÿé—´ç›¸äº’è°ƒç”¨ï¼Œæé«˜äº†ä»£ç å¤ç”¨å’Œå¼€å‘æ•ˆç‡

ğŸ‘  **ç¼ºç‚¹**

* ç³»ç»Ÿé—´è€¦åˆåº¦å˜é«˜ï¼Œè°ƒç”¨å…³ç³»é”™ç»¼å¤æ‚ï¼Œéš¾ä»¥ç»´æŠ¤

### é¢å‘æœåŠ¡æ¶æ„ï¼ˆSOA)

> SOAï¼ˆService Oriented Architectureï¼‰é¢å‘æœåŠ¡çš„æ¶æ„ï¼šå®ƒæ˜¯ä¸€ç§è®¾è®¡æ–¹æ³•ï¼Œå…¶ä¸­åŒ…å«å¤šä¸ªæœåŠ¡ï¼Œ æœåŠ¡ä¹‹é—´é€šè¿‡ç›¸äº’ä¾èµ–æœ€ç»ˆæä¾›ä¸€ç³»åˆ—çš„åŠŸèƒ½ã€‚ä¸€ä¸ªæœåŠ¡ é€šå¸¸ä»¥ç‹¬ç«‹çš„å½¢å¼å­˜åœ¨ä¸æ“ä½œç³»ç»Ÿè¿›ç¨‹ä¸­ã€‚å„ä¸ªæœåŠ¡ä¹‹é—´ é€šè¿‡ç½‘ç»œè°ƒç”¨ã€‚

ESBï¼ˆä¼ä¸šæœåŠ¡æ€»çº¿ï¼‰ï¼Œç®€å• æ¥è¯´ ESB å°±æ˜¯ä¸€æ ¹ç®¡é“ï¼Œç”¨æ¥è¿æ¥å„ä¸ªæœåŠ¡èŠ‚ç‚¹ã€‚ä¸ºäº†é›† æˆä¸åŒç³»ç»Ÿï¼Œä¸åŒåè®®çš„æœåŠ¡ï¼ŒESB åšäº†æ¶ˆæ¯çš„è½¬åŒ–è§£é‡Šå’Œè·¯ç”±å·¥ä½œï¼Œè®©ä¸åŒçš„æœåŠ¡äº’è”äº’é€šã€‚

![image.png](./assets/1671547518125-image.png)

**SOAç¼ºç‚¹ï¼š**  æ¯ä¸ªä¾›åº”å•†æä¾›çš„ESBäº§å“æœ‰åå·®ï¼Œè‡ªèº«å®ç°è¾ƒä¸ºå¤æ‚ï¼›åº”ç”¨æœåŠ¡ç²’åº¦è¾ƒå¤§ï¼ŒESBé›†æˆæ•´åˆæ‰€æœ‰æœåŠ¡å’Œåè®®ã€æ•°æ®è½¬æ¢ä½¿å¾—è¿ç»´ã€æµ‹è¯•éƒ¨ç½²å›°éš¾ã€‚æ‰€æœ‰æœåŠ¡éƒ½é€šè¿‡ä¸€ä¸ªé€šè·¯é€šä¿¡ï¼Œç›´æ¥é™ä½äº†é€šä¿¡é€Ÿåº¦ã€‚

### å¾®æœåŠ¡æ¶æ„

> å¾®æœåŠ¡æ¶æ„æ˜¯ä½¿ç”¨ä¸€å¥—å°æœåŠ¡æ¥å¼€å‘å•ä¸ªåº”ç”¨çš„æ–¹å¼æˆ–é€”å¾„ï¼Œæ¯ä¸ªæœåŠ¡åŸºäºå•ä¸€ä¸šåŠ¡èƒ½åŠ›æ„å»ºï¼Œè¿è¡Œåœ¨è‡ªå·±çš„è¿›ç¨‹ä¸­ï¼Œå¹¶ä½¿ç”¨è½»é‡çº§æœºåˆ¶é€šä¿¡ï¼Œé€šå¸¸æ˜¯HTTP APIï¼Œå¹¶èƒ½å¤Ÿé€šè¿‡è‡ªåŠ¨åŒ–éƒ¨ç½²æœºåˆ¶æ¥ç‹¬ç«‹éƒ¨ç½²ã€‚
>
> è¿™äº›æœåŠ¡å¯ä»¥ä½¿ç”¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€å®ç°ï¼Œä»¥åŠä¸åŒæ•°æ®å­˜å‚¨æŠ€æœ¯ï¼Œå¹¶ä¿æŒæœ€ä½é™åº¦çš„é›†ä¸­å¼ç®¡ç†ã€‚

![image.png](./assets/1671547621234-image.png)

API Gatewayç½‘å…³æ˜¯ä¸€ä¸ªæœåŠ¡å™¨ï¼Œæ˜¯ç³»ç»Ÿçš„å”¯ä¸€å…¥å£ã€‚ä¸ºæ¯ä¸ªå®¢æˆ·ç«¯æä¾›ä¸€ä¸ªå®šåˆ¶çš„APIã€‚APIç½‘å…³æ ¸å¿ƒæ˜¯ï¼Œæ‰€æœ‰çš„å®¢æˆ·ç«¯å’Œæ¶ˆè´¹ç«¯éƒ½é€šè¿‡ç»Ÿä¸€çš„ç½‘å…³æ¥å…¥å¾®æœåŠ¡ï¼Œåœ¨ç½‘å…³å±‚å¤„ç†æ‰€æœ‰çš„éä¸šåŠ¡åŠŸèƒ½ã€‚

å¦‚å®ƒè¿˜å¯ä»¥å…·æœ‰å…¶å®ƒèŒè´£ï¼Œå¦‚èº«ä»½éªŒè¯ã€ç›‘æ§ã€è´Ÿè½½å‡è¡¡ã€ç¼“å­˜ã€è¯·æ±‚åˆ†ç‰‡ä¸ç®¡ç†ã€é™æ€å“åº”å¤„ç†ã€‚é€šå¸¸ï¼Œç½‘å…³æä¾›RESTful/HTTPçš„æ–¹å¼è®¿é—®æœåŠ¡ã€‚è€ŒæœåŠ¡ç«¯é€šè¿‡æœåŠ¡æ³¨å†Œä¸­å¿ƒè¿›è¡ŒæœåŠ¡æ³¨å†Œå’Œç®¡ç†ã€‚

å¾®æœåŠ¡çš„ç‰¹ç‚¹ï¼š

* å•ä¸€èŒè´£ï¼šå¾®æœåŠ¡ä¸­æ¯ä¸€ä¸ªæœåŠ¡éƒ½å¯¹åº”å”¯ä¸€çš„ä¸šåŠ¡èƒ½åŠ›ï¼Œåšåˆ°å•ä¸€èŒè´£
* å¾®ï¼šå¾®æœåŠ¡çš„æœåŠ¡æ‹†åˆ†ç²’åº¦å¾ˆå°ï¼Œä¾‹å¦‚ä¸€ä¸ªç”¨æˆ·ç®¡ç†å°±å¯ä»¥ä½œä¸ºä¸€ä¸ªæœåŠ¡ã€‚æ¯ä¸ªæœåŠ¡è™½å°ï¼Œä½†â€œäº”è„ä¿±å…¨â€ã€‚
* é¢å‘æœåŠ¡ï¼šé¢å‘æœåŠ¡æ˜¯è¯´æ¯ä¸ªæœåŠ¡éƒ½è¦å¯¹å¤–æš´éœ²Resté£æ ¼æœåŠ¡æ¥å£APIã€‚å¹¶ä¸å…³å¿ƒæœåŠ¡çš„æŠ€æœ¯å®ç°ï¼Œåšåˆ°ä¸å¹³å°å’Œè¯­è¨€æ— å…³ï¼Œä¹Ÿä¸é™å®šç”¨ä»€ä¹ˆæŠ€æœ¯å®ç°ï¼Œåªè¦ä¾›Restçš„æ¥å£å³å¯ã€‚
* è‡ªæ²»ï¼šè‡ªæ²»æ˜¯è¯´æœåŠ¡é—´äº’ç›¸ç‹¬ç«‹ï¼Œäº’ä¸å¹²æ‰°
  * å›¢é˜Ÿç‹¬ç«‹ï¼šæ¯ä¸ªæœåŠ¡éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¼€å‘å›¢é˜Ÿï¼Œäººæ•°ä¸èƒ½è¿‡å¤šã€‚
  * æŠ€æœ¯ç‹¬ç«‹ï¼šå› ä¸ºæ˜¯é¢å‘æœåŠ¡ï¼Œæä¾›Restæ¥å£ï¼Œä½¿ç”¨ä»€ä¹ˆæŠ€æœ¯æ²¡æœ‰åˆ«äººå¹²æ¶‰
  * å‰åç«¯åˆ†ç¦»ï¼šé‡‡ç”¨å‰åç«¯åˆ†ç¦»å¼€å‘ï¼Œæä¾›ç»Ÿä¸€Restæ¥å£ï¼Œåç«¯ä¸ç”¨å†ä¸ºPCã€ç§»åŠ¨ç«¯å¼€å‘ä¸åŒæ¥å£
  * æ•°æ®åº“åˆ†ç¦»ï¼šæ¯ä¸ªæœåŠ¡éƒ½ä½¿ç”¨è‡ªå·±çš„æ•°æ®æº
  * éƒ¨ç½²ç‹¬ç«‹ï¼ŒæœåŠ¡é—´è™½ç„¶æœ‰è°ƒç”¨ï¼Œä½†è¦åšåˆ°æœåŠ¡é‡å¯ä¸å½±å“å…¶å®ƒæœåŠ¡ã€‚æœ‰åˆ©äºæŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜ã€‚æ¯ä¸ªæœåŠ¡éƒ½æ˜¯ç‹¬ç«‹çš„ç»„ä»¶ï¼Œå¯å¤ç”¨ï¼Œå¯æ›¿æ¢ï¼Œé™ä½è€¦åˆï¼Œæ˜“ç»´æŠ¤

**å¾®æœåŠ¡æ¶æ„ä¸SOAéƒ½æ˜¯å¯¹ç³»ç»Ÿè¿›è¡Œæ‹†åˆ†ï¼›å¾®æœåŠ¡æ¶æ„åŸºäºSOAæ€æƒ³ï¼Œå¯ä»¥æŠŠå¾®æœåŠ¡å½“åšå»é™¤äº†ESBçš„SOAã€‚ESBæ˜¯SOAæ¶æ„ä¸­çš„ä¸­å¿ƒæ€»çº¿ï¼Œè®¾è®¡å›¾å½¢åº”è¯¥æ˜¯æ˜Ÿå½¢çš„ï¼Œè€Œå¾®æœåŠ¡æ˜¯å»ä¸­å¿ƒåŒ–çš„åˆ†å¸ƒå¼è½¯ä»¶æ¶æ„ã€‚ä¸¤è€…æ¯”è¾ƒç±»ä¼¼ï¼Œä½†å…¶å®ä¹Ÿæœ‰ä¸€äº›å·®åˆ«ï¼š**


| åŠŸèƒ½     | SOA                  | å¾®æœåŠ¡                         |
| ---------- | ---------------------- | -------------------------------- |
| ç»„ä»¶å¤§å° | å¤§å—ä¸šåŠ¡é€»è¾‘         | å•ç‹¬ä»»åŠ¡æˆ–å°å—ä¸šåŠ¡é€»è¾‘         |
| è€¦åˆ     | é€šå¸¸æ¾è€¦åˆ           | æ€»æ˜¯æ¾è€¦åˆ                     |
| ç®¡ç†     | ç€é‡ä¸­å¤®ç®¡ç†         | ç€é‡åˆ†æ•£ç®¡ç†                   |
| ç›®æ ‡     | ç¡®ä¿åº”ç”¨èƒ½å¤Ÿäº¤äº’æ“ä½œ | æ˜“ç»´æŠ¤ã€æ˜“æ‰©å±•ã€æ›´è½»é‡çº§çš„äº¤äº’ |

## æœåŠ¡è°ƒç”¨æ–¹å¼

### RPCå’ŒHTTP


### Httpå®¢æˆ·ç«¯å·¥å…·

> æ—¢ç„¶å¾®æœåŠ¡é€‰æ‹©äº†Httpï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦è€ƒè™‘è‡ªå·±æ¥å®ç°å¯¹è¯·æ±‚å’Œå“åº”çš„å¤„ç†ã€‚ä¸è¿‡å¼€æºä¸–ç•Œå·²ç»æœ‰å¾ˆå¤šçš„httpå®¢æˆ·ç«¯å·¥å…·ï¼Œèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬åšè¿™äº›äº‹æƒ…ï¼Œä¾‹å¦‚ï¼š

* HttpClient
* OKHttp
* URLConnection



### Springçš„RestTemplate

> Springæä¾›äº†ä¸€ä¸ªRestTemplateæ¨¡æ¿å·¥å…·ç±»ï¼Œå¯¹åŸºäºHttpçš„å®¢æˆ·ç«¯è¿›è¡Œäº†å°è£…ï¼Œå¹¶ä¸”å®ç°äº†å¯¹è±¡ä¸jsonçš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œéå¸¸æ–¹ä¾¿ã€‚RestTemplateå¹¶æ²¡æœ‰é™å®šHttpçš„å®¢æˆ·ç«¯ç±»å‹ï¼Œè€Œæ˜¯è¿›è¡Œäº†æŠ½è±¡ï¼Œç›®å‰å¸¸ç”¨çš„3ç§éƒ½æœ‰æ”¯æŒï¼š

* HttpClient
* OkHttp
* JDKåŸç”Ÿçš„URLConnectionï¼ˆé»˜è®¤çš„ï¼‰



## SpringCloudç®€ä»‹

> Spring Cloudæ˜¯Springæ——ä¸‹çš„é¡¹ç›®ä¹‹ä¸€ï¼Œå®˜ç½‘åœ°å€ï¼šhttp://projects.spring.io/spring-cloud/
> Springæœ€æ“…é•¿çš„å°±æ˜¯é›†æˆï¼ŒæŠŠä¸–ç•Œä¸Šæœ€å¥½çš„æ¡†æ¶æ‹¿è¿‡æ¥ï¼Œé›†æˆåˆ°è‡ªå·±çš„é¡¹ç›®ä¸­ã€‚
> Spring Cloudä¹Ÿæ˜¯ä¸€æ ·ï¼Œå®ƒå°†ç°åœ¨éå¸¸æµè¡Œçš„ä¸€äº›æŠ€æœ¯æ•´åˆåˆ°ä¸€èµ·ï¼Œå®ç°äº†è¯¸å¦‚ï¼šé…ç½®ç®¡ç†ï¼ŒæœåŠ¡å‘ç°ï¼Œæ™ºèƒ½è·¯ç”±ï¼Œ
> è´Ÿè½½å‡è¡¡ï¼Œç†”æ–­å™¨ï¼Œæ§åˆ¶æ€»çº¿ï¼Œé›†ç¾¤çŠ¶æ€ç­‰åŠŸèƒ½ï¼›åè°ƒåˆ†å¸ƒå¼ç¯å¢ƒä¸­å„ä¸ªç³»ç»Ÿï¼Œä¸ºå„ç±»æœåŠ¡æä¾›æ¨¡æ¿æ€§é…ç½®ã€‚å…¶ä¸»è¦æ¶‰åŠçš„ç»„ä»¶åŒ…æ‹¬ï¼š
>
> * Eurekaï¼šæ³¨å†Œä¸­å¿ƒ
> * Zuulã€Gatewayï¼šæœåŠ¡ç½‘å…³
> * Ribbonï¼šè´Ÿè½½å‡è¡¡
> * Feignï¼šæœåŠ¡è°ƒç”¨
> * Hystrixæˆ–Resilience4jï¼šç†”æ–­å™¨
> *

![image.png](./assets/image.png)
